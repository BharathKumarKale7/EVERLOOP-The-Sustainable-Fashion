// Extend base layout
extends layout

// Main content block
block content
  // Cart container
  .cart-container
    // Success message alert
    if message
      .alert.alert-success.alert-dismissible.fade.show.mt-3(role="alert")
        = message
        button.btn-close(type="button" data-bs-dismiss="alert" aria-label="Close")
    // Error message alert
    if error
      .alert.alert-danger.alert-dismissible.fade.show.mt-3(role="alert")
        = error
        button.btn-close(type="button" data-bs-dismiss="alert" aria-label="Close")
    // Cart heading
    h1 Cart
    // Display cart items if present
    if cartItems && cartItems.length
      // Loop through cart items
      each item in cartItems
        // Item card
        .card.mb-3
          .row.g-0
            // Item image
            .col-md-4
              img(src=item.image, class="img-fluid rounded-start", alt=item.name)
            // Item details
            .col-md-8
              .card-body
                h5.card-title= item.name
                p.card-text= item.description
                p.card-text
                  small.text-muted Price: £#{item.price}
                  br
                  | Quantity: #{item.quantity}
                // Remove item button
                a.btn.btn-danger(href=`/cart/remove/${item.id}`) Remove
      hr
      // Cart total
      h4 Total: £#{total}
      // Checkout button
      a.btn.btn-primary(href="/checkout") Proceed to Checkout
    // Empty cart message
    else
      p.text-muted Your cart is empty.
    // Bootstrap JS for alerts
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")